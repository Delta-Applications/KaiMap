"use strict";let olc_lat_lng;$(document).ready((function(){$("#search").autocomplete({serviceUrl:"https://nominatim.openstreetmap.org/search?format=json&addressdetails=0",minChars:1,showNoSuggestionNotice:!0,paramName:"q",lookupLimit:10,deferRequestBy:2e3,transformResult:function(e){var t=$.parseJSON(e);return{suggestions:$.map(t,(function(e){return{value:e.display_name,data_lat:e.lat,data_lon:e.lon}}))}},onSearchStart:function(){},onSearchError:function(e,t,a,o){toaster(JSON.stringify(t),2e3)},onSelect:function(e){let t=[e.data_lat,e.data_lon];var a,o;localStorage.setItem("last_location",JSON.stringify(t)),a=t[0],o=t[1],map.setView([a,o],13),hideSearch(),current_lat=Number(a),current_lng=Number(o),L.marker([current_lat,current_lng]).addTo(markers_group),toaster("Press 5 to save the search result as marker")}});window.showSearch=function(){$("#search").autocomplete().enable(),bottom_bar("Close","SELECT",""),$("div#search-box").find("input").val(""),$("div#search-box").css("display","block"),$("div#search-box").find("input").focus(),$("div#bottom-bar").css("display","block"),windowOpen="search"},window.hideSearch=function(){$("div#bottom-bar").css("display","none"),$("div#search-box").css("display","none"),$("div#search-box").find("input").val(""),$("div#search-box").find("input").blur(),$("div#olc").css("display","none"),windowOpen="map"},document.getElementById("search").addEventListener("input",(function(){let e=$("#search").val();var t=e.startsWith("/");if(t){e=e.replace("/",""),$("#search").autocomplete().disable(),$("div.autocomplete-suggestions").css("display","none"),$("div.autocomplete-suggestion").css("display","none"),$("div#olc").css("display","block"),$("#olc").text(OLC.decode(e));let t=String(OLC.decode(e));0==t.includes("NaN")&&(olc_lat_lng=t.split(","),map.setView([olc_lat_lng[0],olc_lat_lng[1]],13))}0==t&&($("div.autocomplete-suggestions").css("display","block"),$("div#olc").css("display","none"),$("#search").autocomplete().enable())}))}));
