const qr=(e=>{let t,a,o=function(){t.srcObject.getTracks().forEach((function(e){e.stop(),document.getElementById("qr-screen").style.display="none"})),t.srcObject=null,windowOpen="finder"};return{start_scan:function(e){bottom_bar("","",""),document.getElementById("qr-screen").style.display="block",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:{width:200,height:200}},(function(n){t=document.querySelector("video"),t.srcObject=n,t.onloadedmetadata=function(n){t.play();var r=document.createElement("canvas");a=setInterval((()=>{r.width=t.videoWidth,r.height=t.videoHeight;var n=r.getContext("2d"),i=Math.max(1,Math.floor(t.videoWidth)),d=Math.max(1,Math.floor(t.videoHeight));n.drawImage(t,0,0,i,d);var c=n.getImageData(0,0,i,d).data;let s=jsQR(c,i,d);s&&(e(s.data),o(),clearInterval(a))}),1e3)}}),(function(e){console.log("The following error occurred: "+e.name)})):console.log("getUserMedia not supported")},stop_scan:o}})();
