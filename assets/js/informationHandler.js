let ServiceRunner=!1;const informationHandler=(()=>{let e=!1,t=function(e){weather.openweather_call(e.lat,e.lng,setting.openweather_api,(function(e){let t=e.city.sunset;var n=new Date(1e3*t),i=n.getHours(),r="0"+n.getMinutes(),a="0"+n.getSeconds(),o=i+":"+r.substr(-2)+":"+a.substr(-2);let c=e.city.sunrise;var l,d=new Date(1e3*c),m=d.getHours(),g="0"+d.getMinutes(),u="0"+d.getSeconds(),s=m+":"+g.substr(-2)+":"+u.substr(-2);document.getElementById("locationame").innerText=e.city.name,document.getElementById("temp").innerText=e.list[0].main.temp+" °C",document.getElementById("hum").innerText=e.list[0].main.humidity+"%rH",document.getElementById("visibility").innerText=Math.round(e.list[0].visibility/1e3)+"km",document.getElementById("wind").innerText=e.list[0].wind.speed+" m/s | "+utility.degToCompass(e.list[0].wind.deg)+" "+e.list[0].wind.deg+"°",document.getElementById("pres").innerText=e.list[0].main.pressure+" hPa",document.getElementById("desc").innerText=e.list[0].weather[0].id+" > "+e.list[0].weather[0].main,l=1==e.list[0].weather[0].icon.includes("d")?"d":"n",document.getElementById("icon").className="list-item-indicator__indicator owf owf-"+e.list[0].weather[0].id+"-"+l+" owf-3x",document.getElementById("sunset").innerText=o+" ("+utility.getRelativeTime(e.city.sunset,null)+")",document.getElementById("sunrise").innerText=s+" ("+utility.getRelativeTime(e.city.sunrise,null)+")";var y=utility.getRelativeTime(e.list[0].dt,null);y=y.charAt(0).toUpperCase()+y.slice(1),document.getElementById("grabtime").innerText=y}))},n=function(){var e=navigator.mozNetworkStats.getAvailableNetworks();e.onsuccess=function(){var e=this.result[0],t=new Date,n=new Date,i=navigator.mozNetworkStats.getSamples(e,n,t),r=navigator.mozNetworkStats.network;null==r&&(document.getElementById("dataTypeC").innerText="Merged"),r==navigator.mozNetworkStats.WIFI&&(document.getElementById("dataTypeC").innerText="Wi-Fi"),r==navigator.mozNetworkStats.MOBILE&&(document.getElementById("dataTypeC").innerText="Mobile"),i.onsuccess=function(){document.getElementById("dataRX").innerText=utility.formatBytes(i.result.data[0].rxBytes),document.getElementById("dataTX").innerText=utility.formatBytes(i.result.data[0].txBytes)},i.onerror=function(){console.log("Something went wrong: ",i.error)}},e.onerror=function(){console.log("Something went wrong: ",e.error)}};return{NetworkStats:n,UpdateInfo:function(){1==ServiceRunner?DisplayFullScreenAd():(function(){if(1==e)return;let n=map.getCenter();e=!0,t(n),service=setInterval((()=>{let e=map.getCenter();t(e)}),35e3)}(),navigator.getBattery().then((function(e){var t=100*e.level+"%",n=e.temperature+" C°";function i(){document.getElementById("batteryHealth").innerText=e.health,document.getElementById("batteryTemp").innerText=n,e.temperature>45&&(document.getElementById("batteryTemp").style.color="#F38C3F"),e.temperature<27&&(document.getElementById("batteryTemp").style.color="#3FB2F3"),(e.temperature>27||e.temperature<45)&&(document.getElementById("batteryTemp").style.color="#37D63B")}function r(){e.charging?(document.getElementById("batteryTimeType").innerText="Charging Time",document.getElementById("batteryTime").innerText=Math.round(e.chargingTime/60).toString()+"min"):(document.getElementById("batteryTimeType").innerText="Discharging Time",document.getElementById("batteryTime").innerText=Math.round(e.dischargingTime/60).toString()+"min")}document.getElementById("batteryCharge").innerText=t,document.getElementById("batteryCharge").style.color=utility.getColorFrom0to1(1-e.level),r(),i(),document.getElementById("batteryTemp").innerText=n,document.getElementById("batteryHealth").innerText=e.health,e.onbatteryhealthchange=i(),e.onlevelchange=function(){i(),document.getElementById("batteryCharge").innerText=t,document.getElementById("batteryCharge").style.color=utility.getColorFrom0to1(1-e.level)},battery.onchargingtimechange=r(),battery.ondischargingtimechange=void(e.charging?(document.getElementById("batteryTimeType").innerText="Charging Time",document.getElementById("batteryTime").innerText=Math.round(e.chargingTime/60).toString()+"min"):(document.getElementById("batteryTimeType").innerText="Discharging Time",document.getElementById("batteryTime").innerText=Math.round(e.dischargingTime/60).toString()+"min"))})),function(){var e=navigator.mozWifiManager.connection.status;e=e.charAt(0).toUpperCase()+e.slice(1);var t=(navigator.connection||navigator.mozConnection||navigator.webkitConnection).type;t=t.charAt(0).toUpperCase()+t.slice(1),document.getElementById("conntype").innerText=t,document.getElementById("wifiStatus").innerText=e,document.getElementById("wifiNetwork").innerText=navigator.mozWifiManager.connection.network.ssid||"Unavailable",document.getElementById("wifiMac").innerText=navigator.mozWifiManager.macAddress||"Unavailable",document.getElementById("wifiIP").innerText=navigator.mozWifiManager.connectionInformation.ipAddress||"Unavailable",navigator.mozWifiManager.onstatuschange=function(){var e=navigator.mozWifiManager.connection.status;e=e.charAt(0).toUpperCase()+e.slice(1);var t=(navigator.connection||navigator.mozConnection||navigator.webkitConnection).type;t=t.charAt(0).toUpperCase()+t.slice(1),document.getElementById("conntype").innerText=t,document.getElementById("wifiStatus").innerText=e,document.getElementById("wifiNetwork").innerText=navigator.mozWifiManager.connection.network.ssid||"Unavailable",document.getElementById("wifiMac").innerText=navigator.mozWifiManager.macAddress||"Unavailable",document.getElementById("wifiIP").innerText=navigator.mozWifiManager.connectionInformation.ipAddress||"Unavailable"}()}(),n(),service=setInterval((()=>{n()}),2e4),ServiceRunner=!0)},UpdateWeather:t,PreciseGeoUpdate:function(e){try{let t={};t.raw=e;let n=map.getCenter();t.DistanceFromCenter=module.calc_distance(t.raw.latitude,t.raw.longitude,n.lat,n.lng),t.raw.altitude?t.altitude=t.raw.altitude.toFixed(1):t.altitude=0,t.lat=t.raw.latitude.toFixed(5),t.long=t.raw.longitude.toFixed(5),t.raw.heading?t.heading=t.raw.heading.toFixed(0):t.heading=0,t.raw.accuracy?t.accuracy=Math.round(t.raw.accuracy):t.accuracy=0,t.raw.speed?t.speed=utility.roundToTwo(3.6*e.speed).toFixed(1):t.speed=0,document.querySelector("#lat").innerText=t.lat,document.querySelector("#lng").innerText=t.long,document.querySelector("#heading").innerText=utility.degToCompass(t.heading)+" "+t.heading,document.querySelector("#altitude").innerText=t.altitude,document.querySelector("#acc").innerText=t.accuracy+"± m",document.querySelector("#distance").innerText=t.DistanceFromCenter+" km",document.querySelector("#speed").innerText=t.speed+" km/h",t.olc=OLC.encode(t.raw.latitude,t.raw.longitude),document.querySelector("#olcode").innerText=t.olc}catch(e){console.error(e.message)}}}})();
