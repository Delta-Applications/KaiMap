const geojson={save_geojson:function(e,t){let o;if("single"==t){let e=markers_group.getLayers();var n=e[e.length-1].toGeoJSON();o=JSON.stringify(n)}if("collection"==t){let e=markers_group.toGeoJSON(),t=map.getBounds();e.bbox=[[t.getSouthWest().lng,t.getSouthWest().lat,t.getNorthEast().lng,t.getNorthEast().lat]],o=JSON.stringify(e)}let s=new Blob([o],{type:"application/json"}),r=navigator.getDeviceStorage("sdcard").addNamed(s,e);r.onsuccess=function(){toaster("Export successful",3e3),windowOpen="map"},r.onerror=function(){toaster("Unable to write the file: "+this.error,2e3),windowOpen="map"}}};
