const flashlight=(()=>{document.ontouchdown;var o=!1,a=null;return{trigger:function(e,n){if((o=null!=e?e:!o)?document.body.classList.add("torching"):document.body.classList.remove("torching"),a)return a.flashMode=o?"torch":"auto",void console.log("Set flashMode:",a.flashMode);console.log("Calling setupCamera"),function(o){if(!navigator.mozCameras)return o("No camera");function a(a){if(!(r<=0)){if(r--,a){var e=a.capabilities.flashModes;console.log("flashModes: "+e),e&&e.indexOf("torch")>=0&&(r=-1,o(null,a))}r||o("No flash")}}var e=3==navigator.mozCameras.getCamera.length;console.log("oldStyle",e);var n=e?function(o){navigator.mozCameras.getCamera({camera:o},null,a,(function(o){throw new Error(o)}))}:function(o){navigator.mozCameras.getCamera({camera:t[s]},{mode:"unspecified"}).then((function(o){a(o.camera)}))},t=navigator.mozCameras.getListOfCameras(),r=t.length;console.log("getListOfCameras: "+r);for(var s=0;s<r;s++)console.log("getCamera:",t[s]),n(t[s]);r||o("No camera")}((function(e,n){if(!n)return console.warn(e),void document.body.classList.add("unsupported");document.body.classList.add("supported"),a=n,console.log("Setting flashMode"),n.flashMode=o?"torch":"auto"}))}}})();
